{"ast":null,"code":"var _jsxFileName = \"/home/max/PycharmProjects/236369/Final_Project/ReactApp/src/Component/Navbar.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Autosuggest from 'react-bootstrap-autosuggest';\nimport Form from \"react-bootstrap/Form\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport Button from \"react-bootstrap/Button\";\n\nclass Navbar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      current_user: 0,\n      username: '',\n      search_msg: 'Search for a user'\n    };\n  }\n\n  get_user() {\n    this.setState({\n      search_msg: 'Search for a user'\n    });\n    axios.defaults.withCredentials = true;\n    axios.get('http://127.0.0.1:5000/user/' + this.state.username).then(response => {\n      this.setState({\n        username: ''\n      });\n      this.props.history.push(`/users/` + response.data.id);\n    }).catch(err => {\n      this.setState({\n        username: '',\n        search_msg: 'User not found'\n      });\n    });\n  }\n\n  onChange(e) {\n    this.setState({\n      username: e.target.value,\n      search_msg: 'Search for a user'\n    });\n  }\n\n  logOut(e) {\n    e.preventDefault();\n    axios.defaults.withCredentials = true;\n    axios.get('http://127.0.0.1:5000/logout').then(response => {\n      localStorage.removeItem('usertoken');\n      this.props.history.push(`/`);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n      this.componentDidMount();\n    }\n  }\n\n  componentDidMount() {\n    const token = localStorage.usertoken;\n\n    if (token) {\n      const decoded = jwt_decode(token);\n      this.setState({\n        current_user: decoded.identity.id\n      });\n    }\n  }\n\n  render() {\n    const loginRegLink = React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Login\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/register\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Register\")));\n    const userLink = React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/users/\" + this.state.current_user,\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"User\")), React.createElement(Form, {\n      inline: true,\n      onSubmit: e => {\n        e.preventDefault();\n        this.get_user();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      type: \"text\",\n      placeholder: this.state.search_msg,\n      onChange: this.onChange.bind(this),\n      value: this.state.username,\n      className: \"mr-md-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(Button, {\n      variant: \"outline-secondary\",\n      onClick: this.get_user.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"\",\n      onClick: this.logOut.bind(this),\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0Logout\")));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"navbar navbar-expand-lg navbar-dark bg-dark rounded\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"navbar-toggler\",\n      type: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#navbarsExample10\",\n      \"aria-controls\": \"navbarsExample10\",\n      \"aria-expanded\": \"false\",\n      \"aria-label\": \"Toggle navigation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"navbar-toggler-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"collapse navbar-collapse justify-content-md-center col-md-12 \",\n      id: \"navbarsExample10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Home\"))), localStorage.usertoken ? userLink : loginRegLink)));\n  }\n\n}\n\nexport default withRouter(Navbar);","map":{"version":3,"sources":["/home/max/PycharmProjects/236369/Final_Project/ReactApp/src/Component/Navbar.js"],"names":["React","Component","Link","withRouter","axios","jwt_decode","Autosuggest","Form","FormControl","Button","Navbar","state","current_user","username","search_msg","get_user","setState","defaults","withCredentials","get","then","response","props","history","push","data","id","catch","err","onChange","e","target","value","logOut","preventDefault","localStorage","removeItem","console","log","componentDidUpdate","prevProps","location","pathname","componentDidMount","token","usertoken","decoded","identity","render","loginRegLink","userLink","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Autosuggest from 'react-bootstrap-autosuggest'\nimport Form from \"react-bootstrap/Form\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport Button from \"react-bootstrap/Button\";\nclass Navbar extends Component {\n    state ={\n        current_user: 0,\n        username:'',\n        search_msg:'Search for a user'\n    }\n    get_user(){\n        this.setState({search_msg:'Search for a user'});\n         axios.defaults.withCredentials = true;\n            axios.get('http://127.0.0.1:5000/user/'+this.state.username).then((response) => {\n                this.setState({username:''});\n                this.props.history.push(`/users/`+response.data.id)\n            }).catch(err => {\n                this.setState({username:'',search_msg:'User not found'});\n\n            });\n    }\n\n    onChange(e){\n        this.setState({username: e.target.value, search_msg:'Search for a user'});\n    }\n\n  logOut(e) {\n      e.preventDefault()\n      axios.defaults.withCredentials = true;\n      axios.get('http://127.0.0.1:5000/logout').then(response => {\n          localStorage.removeItem('usertoken')\n          this.props.history.push(`/`)\n      })\n        .catch(err => {\n          console.log(err)\n        })\n  }\n   componentDidUpdate (prevProps) {\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n        this.componentDidMount();\n    }\n     }\n  componentDidMount() {\n      const token = localStorage.usertoken;\n      if (token) {\n          const decoded = jwt_decode(token);\n          this.setState({\n              current_user: decoded.identity.id\n          });\n      }\n\n  }\n\n\n\n\n  render() {\n\n    const loginRegLink = (\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item\">\n          <Link to=\"/login\" className=\"nav-link\">\n            Login\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/register\" className=\"nav-link\">\n            Register\n          </Link>\n        </li>\n      </ul>\n    )\n\n    const userLink = (\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item\">\n          <Link to={\"/users/\"+this.state.current_user} className=\"nav-link\">\n            User\n          </Link>\n        </li>\n                <Form inline onSubmit={e => { e.preventDefault(); this.get_user() }}>\n              <FormControl type=\"text\" placeholder={this.state.search_msg} onChange={this.onChange.bind(this)}\n                value={this.state.username} className=\"mr-md-1\"/>\n\n              <Button variant=\"outline-secondary\"\n                      onClick={this.get_user.bind(this)}\n                    >Search</Button>\n              </Form>\n        <li className=\"nav-item\">\n          <a href=\"\" onClick={this.logOut.bind(this)} className=\"nav-link\">\n           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Logout\n          </a>\n        </li>\n\n      </ul>\n\n\n    )\n\n    return (\n      <div><nav className=\"navbar navbar-expand-lg navbar-dark bg-dark rounded\">\n        <button\n          className=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarsExample10\"\n          aria-controls=\"navbarsExample10\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span className=\"navbar-toggler-icon\" />\n        </button>\n\n        <div\n          className=\"collapse navbar-collapse justify-content-md-center col-md-12 \"\n          id=\"navbarsExample10\"\n        >\n          <ul className=\"navbar-nav\">\n            <li className=\"nav-item\">\n              <Link to=\"/\" className=\"nav-link\">\n                Home\n              </Link>\n            </li>\n          </ul>\n          {localStorage.usertoken ? userLink : loginRegLink}\n\n        </div>\n\n      </nav>\n\n          </div>\n    )\n  }\n}\n\nexport default withRouter(Navbar)"]},"metadata":{},"sourceType":"module"}