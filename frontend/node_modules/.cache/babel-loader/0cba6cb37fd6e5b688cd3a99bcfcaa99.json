{"ast":null,"code":"var _jsxFileName = \"/home/max/PycharmProjects/236369/Final_Project/ReactApp/src/Component/Register.js\";\nimport React, { Component } from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Alert from \"reactstrap/es/Alert\";\nimport axios from \"axios\";\nexport const register = newUser => {\n  return axios.post('http://127.0.0.1:5000/user/new', {\n    username: newUser.username,\n    first_name: newUser.first_name,\n    last_name: newUser.last_name,\n    gender: newUser.gender,\n    birth_date: newUser.birth_date,\n    email: newUser.email,\n    password: newUser.password\n  }).then(response => {\n    return response.data;\n  });\n};\nconst validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\nconst validateForm = errors => {\n  let valid = true;\n  Object.values(errors).forEach(val => val.length > 0 && (valid = false));\n  return valid;\n};\n\nclass Register extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = date => {\n      this.setState({\n        birth_date: date\n      });\n    };\n\n    this.state = {\n      username: '',\n      first_name: '',\n      last_name: '',\n      gender: '',\n      birth_date: new Date(),\n      email: '',\n      password: '',\n      errors: {\n        username: '',\n        email: '',\n        password: '',\n        first_name: '',\n        last_name: '',\n        gender: 'Please choose your gender'\n      },\n      user_taken: 0,\n      email_taken: 0,\n      invalid: 0\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onChange(e) {\n    //  e.preventDefault()\n    let errors = this.state.errors;\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n\n    switch (name) {\n      case 'username':\n        this.setState({\n          user_taken: 0\n        });\n        errors.username = value.length < 1 || value.length > 20 ? 'Username is not valid!' : '';\n        break;\n\n      case 'gender':\n        errors.gender = '';\n        break;\n\n      case 'email':\n        this.setState({\n          email_taken: 0\n        });\n        errors.email = validEmailRegex.test(value) && value.length <= 120 ? '' : 'Email is not valid!';\n        break;\n\n      case 'password':\n        errors.password = value.length < 1 || value.length > 60 ? 'Password is not valid!' : '';\n        break;\n\n      case 'first_name':\n        errors.first_name = value.length > 20 ? 'First name is too long' : '';\n        break;\n\n      case 'last_name':\n        errors.last_name = value.length > 20 ? 'Last name is too long' : '';\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState({\n      errors,\n      [name]: value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      invalid: 0\n    });\n    this.setState({\n      user_taken: 0\n    });\n    this.setState({\n      email_taken: 0\n    });\n    const newUser = {\n      username: this.state.username,\n      first_name: this.state.first_name,\n      last_name: this.state.last_name,\n      gender: this.state.gender,\n      birth_date: this.state.birth_date,\n      email: this.state.email,\n      password: this.state.password\n    };\n\n    if (validateForm(this.state.errors)) {\n      register(newUser).then(res => {\n        if (res == 'Created') {\n          this.props.history.push(`/login`);\n        }\n\n        if (res == 'Username Taken') {\n          this.setState({\n            user_taken: 1\n          });\n          this.setState({\n            invalid: 1\n          });\n        }\n\n        if (res == 'Email Taken') {\n          this.setState({\n            email_taken: 1\n          });\n          this.setState({\n            invalid: 1\n          });\n        }\n      });\n    } else {\n      this.setState({\n        invalid: 1\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 mt-5 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      noValidate: true,\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"h3 mb-3 font-weight-normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Register\"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, this.state.invalid > 0 && React.createElement(Alert, {\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Your registration is invalid. Please try again!\"), React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"username\",\n      placeholder: \"Enter your username\",\n      value: this.state.username,\n      onChange: this.onChange,\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), this.state.errors.username.length > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, this.state.errors.username), this.state.user_taken > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"This username is taken\")), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"First name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"first_name\",\n      placeholder: \"Enter your first name\",\n      value: this.state.first_name,\n      onChange: this.onChange,\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), this.state.errors.first_name.length > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, this.state.errors.first_name)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Last name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"last_name\",\n      placeholder: \"Enter your last name\",\n      value: this.state.last_name,\n      onChange: this.onChange,\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), this.state.errors.last_name.length > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, this.state.errors.last_name)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Gender\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"gender\",\n      value: \"Male\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), \" Male\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"gender\",\n      value: \"Female\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), \" Female\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"gender\",\n      value: \"other\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), \" Other\"), this.state.errors.gender.length > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, this.state.errors.gender), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Birth date\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(DatePicker, {\n      name: \"birth_date\",\n      selected: this.state.birth_date,\n      onChange: this.handleChange,\n      dateFormat: \"dd/MM/yyyy\",\n      maxDate: new Date(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Email address\"), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      name: \"email\",\n      placeholder: \"Enter email\",\n      value: this.state.email,\n      onChange: this.onChange,\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), this.state.errors.email.length > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, this.state.errors.email), this.state.email_taken > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"This email is taken\")), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      name: \"password\",\n      placeholder: \"Password\",\n      value: this.state.password,\n      onChange: this.onChange,\n      noValidate: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), this.state.errors.password.length > 0 && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, this.state.errors.password)), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-lg btn-primary btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"Register!\")))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/home/max/PycharmProjects/236369/Final_Project/ReactApp/src/Component/Register.js"],"names":["React","Component","DatePicker","Alert","axios","register","newUser","post","username","first_name","last_name","gender","birth_date","email","password","then","response","data","validEmailRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","Register","constructor","handleChange","date","setState","state","Date","user_taken","email_taken","invalid","onChange","bind","onSubmit","e","target","name","value","test","preventDefault","res","props","history","push","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport DatePicker from \"react-datepicker\"\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Alert from \"reactstrap/es/Alert\";\nimport axios from \"axios\";\n\nexport const register = newUser => {\n  return axios\n    .post('http://127.0.0.1:5000/user/new', {\n      username: newUser.username,\n      first_name: newUser.first_name,\n      last_name: newUser.last_name,\n      gender: newUser.gender,\n      birth_date: newUser.birth_date,\n      email: newUser.email,\n      password: newUser.password\n    })\n    .then(response => {\n        return response.data\n    })\n}\n\n\nconst validEmailRegex =\n  RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\nconst validateForm = (errors) => {\n  let valid = true;\n  Object.values(errors).forEach(\n    (val) => val.length > 0 && (valid = false)\n  );\n  return valid;\n}\n\nclass Register extends Component {\n  constructor() {\n    super()\n    this.state = {\n      username: '',\n      first_name: '',\n      last_name: '',\n      gender: '',\n      birth_date: new Date(),\n      email: '',\n      password: '',\n      errors: {\n          username: '',\n          email: '',\n          password: '',\n          first_name: '',\n          last_name: '',\n          gender: 'Please choose your gender',\n      },\n      user_taken: 0,\n      email_taken: 0,\n      invalid: 0\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  handleChange = date => {\n    this.setState({\n      birth_date: date\n    });\n  };\n  onChange(e) {\n      //  e.preventDefault()\n        let errors = this.state.errors;\n        const { name, value } = e.target;\n        this.setState({ [e.target.name]: e.target.value });\n\n        switch (name) {\n            case 'username':\n                this.setState({user_taken: 0});\n                errors.username =\n                  value.length < 1 || value.length > 20\n                    ? 'Username is not valid!'\n                    : '';\n                break;\n            case 'gender':\n                errors.gender='';\n                break;\n            case 'email':\n                this.setState({email_taken: 0});\n                errors.email =\n                  validEmailRegex.test(value)  && value.length <= 120\n                    ? ''\n                    : 'Email is not valid!';\n                break;\n              case 'password':\n                errors.password =\n                  value.length < 1 || value.length > 60\n                    ? 'Password is not valid!'\n                    : '';\n                break;\n                case 'first_name':\n                errors.first_name =\n                  value.length > 20\n                    ? 'First name is too long'\n                    : '';\n                break;\n                case 'last_name':\n                errors.last_name =\n                  value.length > 20\n                    ? 'Last name is too long'\n                    : '';\n                break;\n              default:\n                break;\n        }\n        this.setState({errors, [name]: value});\n  }\n  onSubmit(e) {\n    e.preventDefault()\n    this.setState({invalid: 0});\n    this.setState({user_taken: 0});\n    this.setState({email_taken: 0});\n\n    const newUser = {\n      username: this.state.username,\n      first_name: this.state.first_name,\n      last_name: this.state.last_name,\n      gender: this.state.gender,\n      birth_date: this.state.birth_date,\n      email: this.state.email,\n      password: this.state.password\n    }\n\n     if (validateForm(this.state.errors)) {\n         register(newUser).then(res => {\n             if (res == 'Created') {\n                 this.props.history.push(`/login`)\n             }\n             if (res == 'Username Taken'){\n                 this.setState({user_taken: 1});\n                 this.setState({invalid: 1});\n             }\n             if (res == 'Email Taken'){\n                 this.setState({email_taken: 1});\n                 this.setState({invalid: 1});\n             }\n         })\n     }\n     else{\n         this.setState({invalid: 1});\n     }\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-6 mt-5 mx-auto\">\n            <form noValidate onSubmit={this.onSubmit}>\n              <h1 className=\"h3 mb-3 font-weight-normal\">Register</h1>\n              <div className=\"form-group\">\n                  {this.state.invalid >0 &&  <Alert color=\"danger\">\n                  Your registration is invalid. Please try again!\n                </Alert> }\n                <label htmlFor=\"name\">Username</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"username\"\n                  placeholder=\"Enter your username\"\n                  value={this.state.username}\n                  onChange={this.onChange}\n                  noValidate\n                />\n                 {this.state.errors.username.length > 0 &&\n                <span className='error'>{this.state.errors.username}</span>}\n                {this.state.user_taken > 0 &&\n                <span className='error'>This username is taken</span>}\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"name\">First name</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"first_name\"\n                  placeholder=\"Enter your first name\"\n                  value={this.state.first_name}\n                  onChange={this.onChange}\n                  noValidate\n                />\n                {this.state.errors.first_name.length > 0 &&\n                <span className='error'>{this.state.errors.first_name}</span>}\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"name\">Last name</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"last_name\"\n                  placeholder=\"Enter your last name\"\n                  value={this.state.last_name}\n                  onChange={this.onChange}\n                  noValidate\n                />\n                 {this.state.errors.last_name.length > 0 &&\n                <span className='error'>{this.state.errors.last_name}</span>}\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"name\">Gender</label><br></br>\n                <input type=\"radio\" name=\"gender\" value=\"Male\" onChange={this.onChange}/> Male<br></br>\n                <input type=\"radio\" name=\"gender\" value=\"Female\" onChange={this.onChange}/> Female<br></br>\n                <input type=\"radio\" name=\"gender\" value=\"other\" onChange={this.onChange}/> Other\n              </div>\n                 {this.state.errors.gender.length > 0 &&\n                <span className='error'>{this.state.errors.gender}</span>}\n              <div className=\"form-group\">\n                  <label htmlFor=\"name\">Birth date</label><br></br>\n                <DatePicker\n                 name=\"birth_date\"\n                 selected={this.state.birth_date}\n                 onChange={this.handleChange}\n                 dateFormat=\"dd/MM/yyyy\"\n                 maxDate={new Date()}\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"email\">Email address</label>\n                <input\n                  type=\"email\"\n                  className=\"form-control\"\n                  name=\"email\"\n                  placeholder=\"Enter email\"\n                  value={this.state.email}\n                  onChange={this.onChange}\n                  noValidate\n                />\n                  {this.state.errors.email.length > 0 &&\n                <span className='error'>{this.state.errors.email}</span>}\n                 {this.state.email_taken > 0 &&\n                <span className='error'>This email is taken</span>}\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  value={this.state.password}\n                  onChange={this.onChange}\n                  noValidate\n                />\n                  {this.state.errors.password.length > 0 &&\n                <span className='error'>{this.state.errors.password}</span>}\n              </div>\n              <button\n                type=\"submit\"\n                className=\"btn btn-lg btn-primary btn-block\"\n              >\n                Register!\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}