{"ast":null,"code":"var _jsxFileName = \"/home/max/PycharmProjects/236369/Final_Project/ReactApp/src/Component/Profile.js\";\nimport React, { Component } from 'react';\nimport { Nav, NavItem, NavLink } from 'reactstrap';\nimport axios from \"axios\";\nimport { About } from \"./About\";\nimport { Users } from \"./Users\";\nimport Button from \"react-bootstrap/Button\";\nimport jwt_decode from \"jwt-decode\";\nimport Badge from \"react-bootstrap/Badge\";\nexport class Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      email: '',\n      image_file: '',\n      postsFlag: 1,\n      aboutFlag: 0,\n      followingFlag: 0,\n      followersFlag: 0,\n      isFollowing: false,\n      isFollowingMe: false,\n      current_user: 0,\n      followers_amount: 0,\n      followed_amount: 0\n    };\n  }\n\n  showPosts(e) {\n    e.preventDefault();\n    this.setState({\n      postsFlag: 1,\n      aboutFlag: 0,\n      followingFlag: 0,\n      followersFlag: 0\n    });\n  }\n\n  showAbout() {\n    this.setState({\n      postsFlag: 0,\n      aboutFlag: 1,\n      followingFlag: 0,\n      followersFlag: 0\n    });\n  }\n\n  showFollowing() {\n    this.setState({\n      postsFlag: 0,\n      aboutFlag: 0,\n      followingFlag: 1,\n      followersFlag: 0\n    });\n  }\n\n  showFollowers() {\n    this.setState({\n      postsFlag: 0,\n      aboutFlag: 0,\n      followingFlag: 0,\n      followersFlag: 1\n    });\n  }\n\n  componentDidMount() {\n    const token = localStorage.usertoken;\n\n    if (token) {\n      const decoded = jwt_decode(token);\n      this.setState({\n        current_user: decoded.identity.id\n      });\n    }\n\n    axios.get('http://127.0.0.1:5000/users/' + this.props.match.params.id).then(response => {\n      this.setState({\n        username: response.data.username,\n        image_file: response.data.image_file,\n        email: response.data.email,\n        followers_amount: response.data.followers,\n        followed_amount: response.data.followed\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    axios.defaults.withCredentials = true;\n    axios.get('http://127.0.0.1:5000/is_following/' + this.props.match.params.id).then(response => {\n      const res = response.data == 'True' ? true : false;\n      this.setState({\n        isFollowing: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    axios.defaults.withCredentials = true;\n    axios.get('http://127.0.0.1:5000/is_following_me/' + this.props.match.params.id).then(response => {\n      const res = response.data == 'True' ? true : false;\n      this.setState({\n        isFollowingMe: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n      this.componentDidMount();\n    }\n  }\n\n  followUser() {\n    axios.defaults.withCredentials = true;\n    axios.post('http://127.0.0.1:5000/follow/' + this.props.match.params.id).then(response => {\n      this.setState({\n        isFollowing: true\n      });\n      this.componentDidMount();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  unfollowUser() {\n    axios.defaults.withCredentials = true;\n    axios.delete('http://127.0.0.1:5000/follow/' + this.props.match.params.id).then(response => {\n      this.setState({\n        isFollowing: false\n      });\n      this.componentDidMount();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  updateMenuInfo(info) {\n    this.setState({\n      username: info.username,\n      email: info.email\n    });\n  }\n\n  updateMenuPic(info) {\n    this.setState({\n      image_file: info.image_file\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"jumbotron-fluid mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"center\",\n      className: \"rounded-circle account-img\",\n      src: \"http://127.0.0.1:5000\" + this.state.image_file,\n      height: \"200\",\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      className: \"account-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, this.state.username), React.createElement(\"p\", {\n      className: \"text-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.state.email, \"   \", this.state.current_user != this.props.match.params.id && this.state.isFollowingMe && React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Badge, {\n      pill: true,\n      variant: \"secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Follows you\"))), this.state.current_user != this.props.match.params.id && React.createElement(Button, {\n      variant: \"outline-primary\",\n      onClick: this.state.isFollowing ? this.unfollowUser.bind(this) : this.followUser.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, this.state.isFollowing ? 'Unfollow' : 'Follow'))))), React.createElement(Nav, {\n      tabs: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      href: \"#\",\n      onClick: this.showAbout.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"About Me\"))), this.state.aboutFlag ? React.createElement(About, {\n      id: this.props.match.params.id,\n      updateInfo: this.updateMenuInfo.bind(this),\n      updatePic: this.updateMenuPic.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }) : React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), this.state.followersFlag ? React.createElement(Users, {\n      id: this.props.match.params.id,\n      type: 1,\n      flag: this.state.isFollowing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }) : React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), this.state.followingFlag ? React.createElement(Users, {\n      id: this.props.match.params.id,\n      type: 2,\n      flag: this.state.isFollowing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }) : React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }));\n  }\n\n}\nexport default Profile;","map":{"version":3,"sources":["/home/max/PycharmProjects/236369/Final_Project/ReactApp/src/Component/Profile.js"],"names":["React","Component","Nav","NavItem","NavLink","axios","About","Users","Button","jwt_decode","Badge","Profile","state","username","email","image_file","postsFlag","aboutFlag","followingFlag","followersFlag","isFollowing","isFollowingMe","current_user","followers_amount","followed_amount","showPosts","e","preventDefault","setState","showAbout","showFollowing","showFollowers","componentDidMount","token","localStorage","usertoken","decoded","identity","id","get","props","match","params","then","response","data","followers","followed","catch","err","console","log","defaults","withCredentials","res","componentDidUpdate","prevProps","location","pathname","followUser","post","unfollowUser","delete","updateMenuInfo","info","updateMenuPic","render","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Nav, NavItem, NavLink } from 'reactstrap';\nimport axios from \"axios\";\nimport {About} from \"./About\";\nimport {Users} from \"./Users\";\n\nimport Button from \"react-bootstrap/Button\";\nimport jwt_decode from \"jwt-decode\";\nimport Badge from \"react-bootstrap/Badge\";\n\nexport class Profile extends Component{\n    state={\n        username: '',\n        email: '',\n        image_file: '',\n        postsFlag: 1,\n        aboutFlag:0,\n        followingFlag:0,\n        followersFlag:0,\n        isFollowing: false,\n        isFollowingMe: false,\n        current_user:0,\n        followers_amount:0,\n        followed_amount:0\n    }\n    showPosts(e) {\n        e.preventDefault()\n        this.setState({\n                postsFlag: 1,\n                aboutFlag: 0,\n                 followingFlag:0,\n                followersFlag:0\n            })\n    }\n\n    showAbout(){\n        this.setState({postsFlag: 0,\n        aboutFlag:1,\n          followingFlag:0,\n                followersFlag:0})\n    }\n\n    showFollowing(){\n        this.setState({postsFlag: 0,\n        aboutFlag:0,\n          followingFlag:1,\n                followersFlag:0})\n    }\n\n    showFollowers(){\n        this.setState({postsFlag: 0,\n        aboutFlag:0,\n          followingFlag:0,\n                followersFlag:1})\n    }\n    componentDidMount() {\n         const token = localStorage.usertoken;\n          if (token) {\n              const decoded = jwt_decode(token);\n              this.setState({\n                  current_user: decoded.identity.id\n              });\n          }\n        axios.get('http://127.0.0.1:5000/users/' + this.props.match.params.id).then((response) => {\n                this.setState({\n                   username: response.data.username,\n                    image_file: response.data.image_file,\n                  email: response.data.email,\n                    followers_amount: response.data.followers,\n                    followed_amount: response.data.followed,\n                })\n            }).catch(err => {\n                console.log(err)\n            });\n        axios.defaults.withCredentials = true;\n         axios.get('http://127.0.0.1:5000/is_following/' + this.props.match.params.id).then((response) => {\n             const res = ( response.data == 'True') ? true : false;\n                this.setState({\n                   isFollowing: res\n                })\n            }).catch(err => {\n                console.log(err)\n            });\n\n         axios.defaults.withCredentials = true;\n         axios.get('http://127.0.0.1:5000/is_following_me/' + this.props.match.params.id).then((response) => {\n             const res = ( response.data == 'True') ? true : false;\n                this.setState({\n                   isFollowingMe: res\n                })\n            }).catch(err => {\n                console.log(err)\n            });\n\n  }\n   componentDidUpdate (prevProps) {\n       if (prevProps.location.pathname !== this.props.location.pathname) {\n           this.componentDidMount();\n       }\n   }\n\n   followUser(){\n         axios.defaults.withCredentials = true;\n         axios.post('http://127.0.0.1:5000/follow/' + this.props.match.params.id).then((response) => {\n                this.setState({\n                   isFollowing: true\n                })\n             this.componentDidMount();\n            }).catch(err => {\n                console.log(err)\n            });\n   }\n\n    unfollowUser(){\n         axios.defaults.withCredentials = true;\n         axios.delete('http://127.0.0.1:5000/follow/' + this.props.match.params.id).then((response) => {\n                this.setState({\n                   isFollowing: false\n                })\n             this.componentDidMount();\n            }).catch(err => {\n                console.log(err)\n            });\n   }\n\n   updateMenuInfo(info){\n        this.setState({\n              username: info.username,\n                email: info.email,\n        });\n\n   }\n   updateMenuPic(info){\n        this.setState({\n              image_file: info.image_file,\n        });\n\n   }\n    render(){\n        return( <div>\n                    <div className=\"jumbotron-fluid mt-5\" >\n                      <div className=\"text-center\">\n                          <div className=\"media\">\n                                      <div className=\"media-body\">\n                                          <img className=\"center\" className=\"rounded-circle account-img\"\n                                               src={\"http://127.0.0.1:5000\" + this.state.image_file}\n                                               height=\"200\" width=\"200\"\n                                          />\n                                          <h1 className=\"account-heading\">{this.state.username}</h1>\n                                          <p className=\"text-secondary\">{this.state.email}   {(this.state.current_user != this.props.match.params.id) && this.state.isFollowingMe &&\n                                                   <h5><Badge pill variant=\"secondary\">Follows you</Badge></h5>}</p>\n                                               {(this.state.current_user != this.props.match.params.id) && <Button\n                                                  variant=\"outline-primary\"\n                                                  onClick={this.state.isFollowing ? this.unfollowUser.bind(this) : this.followUser.bind(this)}\n                                                >\n                                                  {this.state.isFollowing ? 'Unfollow' : 'Follow'}\n                                                </Button> }\n\n                                      </div>\n                      </div>\n                    </div>\n                    </div>\n                    <Nav tabs>\n                          <NavItem>\n                            <NavLink\n                                href=\"#\"\n                                onClick= {this.showAbout.bind(this)}>\n                                About Me\n                            </NavLink>\n                          </NavItem>\n                        </Nav>\n\n            {this.state.aboutFlag ? <About id ={this.props.match.params.id} updateInfo={this.updateMenuInfo.bind(this)}\n                    updatePic={this.updateMenuPic.bind(this)} /> : <br/>}\n                {this.state.followersFlag  ? <Users id ={this.props.match.params.id} type={1} flag={this.state.isFollowing}/> : <br/>}\n                {this.state.followingFlag  ? <Users id ={this.props.match.params.id} type={2} flag={this.state.isFollowing}/> : <br/>}\n\n            </div>\n\n        )\n    }\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}